webpackJsonp([4],{"41lE":function(e,t){},NStt:function(e,t){},"q+lN":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("exGp"),l=r.n(o),i=r("Dd8w"),s=r.n(i),c={name:"user-edit",props:["id"],data:function(){return{depList:[],posList:[],ruleForm:{empID:"",employeeName:"",mobilePhone:"",depIDs:"",logicDepIDs:"",posIDs:"",departmentLeader:0},rules:{employeeName:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobilePhone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],depIDs:[{required:!0,message:"请选择部门",trigger:"change"}],logicDepIDs:[{required:!0,message:"请选择部门结构",trigger:"change"}],posIDs:[{required:!0,message:"请输入职位",trigger:"blur"}],departmentLeader:[{required:!0,message:"请选择是否领导",trigger:"change"}]}}},created:function(){var e=this;return l()(n.a.mark(function t(){var r,a,o,l;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.next=3,r.$http.get("/api/Department/list");case 3:return a=t.sent,r.depList=a.data,t.next=7,r.$http.get("/api/Position/list");case 7:if(o=t.sent,r.posList=o.data,"0"!=r.id){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,r.$http.get("/api/employee/"+r.id);case 13:"0"==(l=t.sent).code&&(r.ruleForm=l.data);case 15:case"end":return t.stop()}},t,e)}))()},methods:{submitForm:function(e){var t=this;return l()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(a=t).$refs[e].validate(function(){var e=l()(n.a.mark(function e(r){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,a.$http.post("/api/Employee/edit",s()({},a.ruleForm));case 4:"0"==e.sent.code&&a.$emit("close",!0);case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}},r,t)}))()},resetForm:function(e){this.$refs[e].resetFields()}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"small"}},[r("el-row",[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"姓名",prop:"employeeName"}},[r("el-input",{model:{value:e.ruleForm.employeeName,callback:function(t){e.$set(e.ruleForm,"employeeName",t)},expression:"ruleForm.employeeName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"手机号码",prop:"mobilePhone"}},[r("el-input",{model:{value:e.ruleForm.mobilePhone,callback:function(t){e.$set(e.ruleForm,"mobilePhone",t)},expression:"ruleForm.mobilePhone"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:22}},[r("el-form-item",{attrs:{label:"部门",prop:"depIDs"}},[r("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择部门"},model:{value:e.ruleForm.depIDs,callback:function(t){e.$set(e.ruleForm,"depIDs",t)},expression:"ruleForm.depIDs"}},e._l(e.depList,function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:22}},[r("el-form-item",{attrs:{label:"结构部门",prop:"logicDepIDs"}},[r("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择结构部门"},model:{value:e.ruleForm.logicDepIDs,callback:function(t){e.$set(e.ruleForm,"logicDepIDs",t)},expression:"ruleForm.logicDepIDs"}},e._l(e.depList,function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:22}},[r("el-form-item",{attrs:{label:"角色职称",prop:"posIDs"}},[r("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择角色职称"},model:{value:e.ruleForm.posIDs,callback:function(t){e.$set(e.ruleForm,"posIDs",t)},expression:"ruleForm.posIDs"}},e._l(e.posList,function(e){return r("el-option",{key:e.id,attrs:{label:e.positionName,value:e.id}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"是否领导",prop:"departmentLeader"}},[r("el-radio-group",{model:{value:e.ruleForm.departmentLeader,callback:function(t){e.$set(e.ruleForm,"departmentLeader",t)},expression:"ruleForm.departmentLeader"}},[r("el-radio",{attrs:{label:0}},[e._v("否")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"modebitsubt"},[r("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var p={name:"userInfo",props:[""],components:{userEdit:r("VU/8")(c,u,!1,function(e){r("41lE")},"data-v-5d637e94",null).exports},data:function(){return{empID:"",totalPage:0,currentPage:1,drawer:!1,query:{mobilePhone:""},tableData:[],columnData:[{label:"姓名",prop:"employeeName",minWidth:"30%"},{label:"手机号码",prop:"mobilePhone",minWidth:"30%"},{label:"部门",prop:"depNames",minWidth:"60%",formatter:function(e,t,r){return r.join(",")}},{label:"结构部门",prop:"logicDepNames",minWidth:"60%",formatter:function(e,t,r){return r.join(",")}},{label:"角色职位",prop:"posNames",minWidth:"60%",formatter:function(e,t,r){return r.join(",")}},{label:"是否领导",prop:"departmentLeader",minWidth:"20%",formatter:function(e,t,r){return 1==r?"是":"否"}}]}},computed:{},created:function(){this.onSOSO()},methods:{onSOSO:function(){this.currentPage=1,this.getList()},getList:function(){var e=this;return l()(n.a.mark(function t(){var r,a,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={page:(r=e).currentPage,pageSize:r.$config.PAGE_SIZE,query:r.query},t.next=4,r.$http.post("/api/Employee/list",a);case 4:"0"==(o=t.sent).code&&(r.tableData=o.data.rows,o.data.totalPage&&(r.totalPage=o.data.totalPage,console.info("total",r.totalPage)));case 6:case"end":return t.stop()}},t,e)}))()},adduser:function(){this.empID="0",this.drawer=!0},drawerClose:function(e){this.drawer=!1,this.empID="",e&&(this.currentPage=1,this.getList())},clickRow:function(e){this.drawer=!0,this.empID=e.empID},deltRow:function(e){var t=this;return l()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=t,r.next=3,a.$http.post("/api/Employee/delete/"+e.empID);case 3:"0"==r.sent.code&&a.onSOSO();case 5:case"end":return r.stop()}},r,t)}))()},reset:function(e){var t=this;return l()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=t,r.next=3,a.$http.post("/api/Employee/resetpwd/"+e.empID);case 3:"0"==r.sent.code&&a.$notify.info({title:"消息",message:"重置成功"});case 5:case"end":return r.stop()}},r,t)}))()}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"waige"},[r("el-row",[r("el-col",[r("div",{staticClass:"rightflex marigbot"},[r("div",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.adduser()}}},[r("i",{staticClass:"el-icon-plus"}),e._v(" 新增员工")])],1),e._v(" "),r("div",[r("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"输入手机号查询"},model:{value:e.query.mobilePhone,callback:function(t){e.$set(e.query,"mobilePhone",t)},expression:"query.mobilePhone"}}),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSOSO}},[e._v("搜索")])],1)])])],1),e._v(" "),r("div",{staticClass:"biaoge"},[r("el-row",[r("el-col",[r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#fafafa"},data:e.tableData,size:"small",border:""}},[e._l(e.columnData,function(t,a){return r("el-table-column",e._b({key:a},"el-table-column",t,!1))}),e._v(" "),r("el-table-column",e._b({scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(r){return e.clickRow(t.row)}}},[e._v("修改")]),e._v(" "),r("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除吗？"},on:{confirm:function(r){return e.deltRow(t.row)}}},[r("el-button",{attrs:{slot:"reference",type:"danger",size:"small",icon:"el-icon-delete"},slot:"reference"},[e._v("删除")])],1),e._v(" "),r("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定重置密码吗？"},on:{confirm:function(r){return e.reset(t.row)}}},[r("el-button",{attrs:{slot:"reference",type:"warning",size:"small"},slot:"reference"},[e._v("重置密码")])],1)],1)]}}])},"el-table-column",{label:"操作",minWidth:"70%",prop:"opention"},!1))],2)],1)],1),e._v(" "),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.currentPage,"page-count":e.totalPage},on:{"current-change":e.getList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"0"==e.empID?"新增员工信息":"修改员工信息",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t},closed:e.drawerClose}},[""!=e.empID?r("user-edit",{attrs:{id:e.empID},on:{close:e.drawerClose}}):e._e()],1)],1)},staticRenderFns:[]};var d=r("VU/8")(p,m,!1,function(e){r("NStt")},"data-v-2e6a8a3e",null);t.default=d.exports}});
//# sourceMappingURL=4.edbdd3276cbf4d2ceea9.js.map
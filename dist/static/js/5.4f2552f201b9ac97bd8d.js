webpackJsonp([5],{"0Mbv":function(e,t){},FttB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),i=a("exGp"),o=a.n(i),l={name:"week-export",props:[],data:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,e.getDate());return{exporting:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date;a.setTime(t.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var a=new Date;a.setTime(t.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var a=new Date;a.setTime(t.getTime()-7776e6),e.$emit("pick",[a,t])}},{text:"最近半年",onClick:function(e){var a=new Date;a.setTime(t.getTime()-158112e5),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var a=new Date;a.setTime(t.getTime()-316224e5),e.$emit("pick",[a,t])}}]},dateVal:""}},created:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},methods:{submitForm:function(){var e=this;return o()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e).dateVal){t.next=4;break}return a.$notify.error({title:"提示",message:"请选择时间范围"}),t.abrupt("return");case 4:return n={startDate:a.dateVal[0],endDate:a.dateVal[1]},a.exporting=!0,t.next=8,a.$http.postDownload("/api/WeekReview/manager/export",n);case 8:t.sent,a.exporting=!1;case 10:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.dateVal,callback:function(t){e.dateVal=t},expression:"dateVal"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",loading:e.exporting},on:{click:function(t){return e.submitForm()}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var s={name:"weekreport",props:[""],components:{weekExport:a("VU/8")(l,c,!1,function(e){a("0Mbv")},"data-v-1d34464e",null).exports},data:function(){var e=this;return{drawer:!1,totalPage:0,currentPage:1,query:{employeeName:""},tableData:[],columnData:[{label:"姓名",prop:"employeeName",minWidth:"40%"},{label:"提交时间",prop:"weekDate",minWidth:"40%",formatter:function(e,t,a){return a.substr(0,10)}},{label:"周报状态",prop:"status",minWidth:"40%",formatter:function(t,a,n){return e.$Tool.getEnumTextByValue("weekStatus",n)}},{label:"审批人",prop:"replyName",minWidth:"40%"}]}},computed:{},created:function(){this.onSOSO()},methods:{onSOSO:function(){this.currentPage=1,this.getList()},getList:function(){var e=this;return o()(r.a.mark(function t(){var a,n,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:(a=e).currentPage,pageSize:a.$config.PAGE_SIZE,query:a.query},t.next=4,a.$http.post("/api/WeekReview/manager/list",n);case 4:"0"==(i=t.sent).code&&(a.tableData=i.data.rows,i.data.totalPage&&(a.totalPage=i.data.totalPage,console.info("total",a.totalPage)));case 6:case"end":return t.stop()}},t,e)}))()},clickRow:function(e){this.$router.push({name:"reportdateil",params:{id:e.id}})},exportFn:function(){this.drawer=!0}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"waige"},[a("el-row",[a("el-col",[a("div",{staticClass:"rightflex marigbot"},[a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.exportFn()}}},[a("i",{staticClass:"el-icon-download"}),e._v(" 周报下载")])],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"输入姓名检索"},model:{value:e.query.employeeName,callback:function(t){e.$set(e.query,"employeeName",t)},expression:"query.employeeName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSOSO}},[e._v("搜索")])],1)])])],1),e._v(" "),a("div",{staticClass:"biaoge"},[a("el-row",[a("el-col",[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#fafafa"},data:e.tableData,size:"small",border:""}},[e._l(e.columnData,function(t,n){return a("el-table-column",e._b({key:n},"el-table-column",t,!1))}),e._v(" "),a("el-table-column",e._b({scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-sort"},on:{click:function(a){return e.clickRow(t.row)}}},[e._v("查看详情")])],1)]}}])},"el-table-column",{label:"操作",minWidth:"70%",prop:"opention"},!1))],2)],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.currentPage,"page-count":e.totalPage},on:{"current-change":e.getList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"导出",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[a("week-export",{on:{close:function(t){e.drawer=!1}}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(s,u,!1,function(e){a("Oh7O")},"data-v-3d20788e",null);t.default=p.exports},Oh7O:function(e,t){}});
//# sourceMappingURL=5.4f2552f201b9ac97bd8d.js.map
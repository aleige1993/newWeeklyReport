webpackJsonp([3],{JPyK:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("exGp"),i=r.n(o),s=r("Dd8w"),l=r.n(s),u={name:"role-edit",props:["id"],data:function(){return{authList:[],ruleForm:{positionName:"",authorization:[]},rules:{positionName:[{required:!0,message:"请输入角色职称",trigger:"blur"}],authorization:[{required:!0,message:"请选择权限",trigger:"change"}]}}},created:function(){var t=this;return i()(n.a.mark(function e(){var r,a,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,console.info("id",r.id),e.next=4,r.$http.get("/api/Position/authorizationlist");case 4:if(a=e.sent,r.authList=a.data,"0"!=r.id){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.$http.get("/api/Position/"+r.id);case 10:"0"==(o=e.sent).code&&(r.ruleForm=o.data);case 12:case"end":return e.stop()}},e,t)}))()},methods:{submitForm:function(t){var e=this;return i()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(a=e).$refs[t].validate(function(){var t=i()(n.a.mark(function t(r){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,a.$http.post("/api/Position/save",l()({},a.ruleForm));case 4:"0"==t.sent.code&&a.$emit("close",!0);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return r.stop()}},r,e)}))()}}},c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"80px",size:"small"}},[r("el-row",[r("el-form-item",{attrs:{label:"角色",prop:"positionName"}},[r("el-input",{attrs:{placeholder:"请输入角色职称"},model:{value:t.ruleForm.positionName,callback:function(e){t.$set(t.ruleForm,"positionName",e)},expression:"ruleForm.positionName"}})],1)],1),t._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"权限",prop:"authorization"}},[r("el-checkbox-group",{model:{value:t.ruleForm.authorization,callback:function(e){t.$set(t.ruleForm,"authorization",e)},expression:"ruleForm.authorization"}},t._l(t.authList,function(e){return r("el-checkbox",{key:e.value,attrs:{label:e.value,name:"type"}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),r("div",{staticClass:"modebitsubt"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var d={name:"rolepart",props:[""],components:{roleEdit:r("VU/8")(u,c,!1,function(t){r("cg2n")},"data-v-ed9fb38a",null).exports},data:function(){return{id:"",drawer:!1,totalPage:0,currentPage:1,tableData:[],columnData:[{label:"角色职称",prop:"positionName",minWidth:"80%"},{label:"权限",prop:"auths",minWidth:"80%",formatter:function(t,e,r){return r.map(function(t){return t.name}).join(",")}}]}},computed:{},created:function(){this.onSOSO()},methods:{onSOSO:function(){this.currentPage=1,this.getList()},getList:function(){var t=this;return i()(n.a.mark(function e(){var r,a,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={page:(r=t).currentPage,pageSize:r.$config.PAGE_SIZE,query:r.query},e.next=4,r.$http.post("/api/Position/list",a);case 4:"0"==(o=e.sent).code&&(r.tableData=o.data.rows,o.data.totalPage&&(r.totalPage=o.data.totalPage));case 6:case"end":return e.stop()}},e,t)}))()},addRole:function(){this.id="0",this.drawer=!0},drawerClose:function(t){this.id="",this.drawer=!1,t&&this.onSOSO()},clickRow:function(t){this.drawer=!0,this.id=t.id},deltRow:function(t){var e=this;return i()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e,r.next=3,a.$http.get("/api/Position/delete/"+t.id);case 3:"0"==r.sent.code&&a.onSOSO();case 5:case"end":return r.stop()}},r,e)}))()}}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"waige"},[r("el-row",[r("el-col",[r("div",{staticClass:"rightflex marigbot"},[r("div",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addRole()}}},[r("i",{staticClass:"el-icon-plus"}),t._v(" 新增角色")])],1)])])],1),t._v(" "),r("div",{staticClass:"biaoge"},[r("el-row",[r("el-col",[r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"#fafafa"},data:t.tableData,size:"small",border:""}},[t._l(t.columnData,function(e,a){return r("el-table-column",t._b({key:a},"el-table-column",e,!1))}),t._v(" "),r("el-table-column",t._b({scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(r){return t.clickRow(e.row)}}},[t._v("修改")]),t._v(" "),r("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除吗？"},on:{confirm:function(r){return t.deltRow(e.row)}}},[r("el-button",{attrs:{slot:"reference",type:"danger",size:"small",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1)],1)]}}])},"el-table-column",{label:"操作",minWidth:"70%",prop:"opention"},!1))],2)],1)],1),t._v(" "),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.currentPage,"page-count":t.totalPage},on:{"current-change":t.getList,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1),t._v(" "),r("el-dialog",{attrs:{width:"30%",title:"0"==t.id?"新增角色":"修改角色",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e},closed:t.drawerClose}},[""!=t.id?r("role-edit",{attrs:{id:t.id},on:{close:t.drawerClose}}):t._e()],1)],1)},staticRenderFns:[]};var m=r("VU/8")(d,p,!1,function(t){r("qmCM")},"data-v-55d762ea",null);e.default=m.exports},cg2n:function(t,e){},qmCM:function(t,e){}});
//# sourceMappingURL=3.5d7ee22a70232ed93a9d.js.map